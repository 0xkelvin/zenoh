{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PluginConfig",
  "type": "object",
  "required": [
    "name",
    "required",
    "rest",
    "storages",
    "volumes"
  ],
  "properties": {
    "backend_search_dirs": {
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "name": {
      "type": "string"
    },
    "required": {
      "type": "boolean"
    },
    "rest": {
      "type": "object",
      "additionalProperties": true
    },
    "storages": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/StorageConfig"
      }
    },
    "volumes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/VolumeConfig"
      }
    }
  },
  "definitions": {
    "Duration": {
      "type": "object",
      "required": [
        "nanos",
        "secs"
      ],
      "properties": {
        "nanos": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        },
        "secs": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0.0
        }
      }
    },
    "GarbageCollectionConfig": {
      "type": "object",
      "required": [
        "lifespan",
        "period"
      ],
      "properties": {
        "lifespan": {
          "$ref": "#/definitions/Duration"
        },
        "period": {
          "$ref": "#/definitions/Duration"
        }
      }
    },
    "OwnedKeyExpr": {
      "description": "A [`Arc<str>`] newtype that is statically known to be a valid key expression.\n\nSee [`keyexpr`](super::borrowed::keyexpr).",
      "type": "string"
    },
    "ReplicaConfig": {
      "type": "object",
      "required": [
        "delta",
        "propagation_delay",
        "publication_interval"
      ],
      "properties": {
        "delta": {
          "$ref": "#/definitions/Duration"
        },
        "propagation_delay": {
          "$ref": "#/definitions/Duration"
        },
        "publication_interval": {
          "$ref": "#/definitions/Duration"
        }
      }
    },
    "StorageConfig": {
      "type": "object",
      "required": [
        "complete",
        "garbage_collection_config",
        "key_expr",
        "name",
        "volume_cfg",
        "volume_id"
      ],
      "properties": {
        "complete": {
          "type": "boolean"
        },
        "garbage_collection_config": {
          "$ref": "#/definitions/GarbageCollectionConfig"
        },
        "key_expr": {
          "$ref": "#/definitions/OwnedKeyExpr"
        },
        "name": {
          "type": "string"
        },
        "replica_config": {
          "anyOf": [
            {
              "$ref": "#/definitions/ReplicaConfig"
            },
            {
              "type": "null"
            }
          ]
        },
        "strip_prefix": {
          "anyOf": [
            {
              "$ref": "#/definitions/OwnedKeyExpr"
            },
            {
              "type": "null"
            }
          ]
        },
        "volume_cfg": true,
        "volume_id": {
          "type": "string"
        }
      }
    },
    "VolumeConfig": {
      "type": "object",
      "required": [
        "name",
        "required",
        "rest"
      ],
      "properties": {
        "backend": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": "string"
        },
        "paths": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          }
        },
        "required": {
          "type": "boolean"
        },
        "rest": {
          "type": "object",
          "additionalProperties": true
        }
      }
    }
  }
}